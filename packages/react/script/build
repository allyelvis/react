#!/bin/bash

set -e

# Clean up
npm run clean

# Generate color schemes
npm run build:precompile-color-schemes

# Bundle
npx rollup -c

# Type check
npx tsc --project tsconfig.build.json

# Copy type declarations
npx copyfiles -u 2 "./dist/lib/**/*.d.ts" ./dist/lib-esm

# Build components.json file for documentation
npm run build:components.json
